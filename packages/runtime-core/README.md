## 概要

`runtime-core` はランタイムの“プラットフォーム非依存”なコア部分を収めるパッケージです。リアクティブ更新のキュー、コンポーネントインスタンスのライフサイクル、仮想ノード（VNode）の構造や差分アルゴリズム、レンダラの抽象インターフェースなど、プラットフォームに依存しないロジックをここに置きます。

## 責務

- リアクティブシステム（状態を監視し、変更をスケジューリングして再描画する）
- コンポーネントの作成・マウント・アンマウント・ライフサイクル管理
- 仮想ノード（VNode）と差分アルゴリズムの定義
- プラットフォーム抽象（レンダラが依存する最小限のインターフェース）の提供

## 設計方針

- **プラットフォーム非依存**: DOM API を直接参照しない。必要な操作は抽象インターフェースとして定義する。
- **小さく保つ**: 外部に公開する API は最小化し、入れ替えやテストを容易にする。
- **テスト重視**: ロジック単体でユニットテストを実行できるよう設計する。

## ここに含まれる主要な概念／ファイル

- `apiCreateApp.ts`: アプリ生成 API（`createApp`）の実装とエクスポート。レンダラと結びつける橋渡しを行う。
- `component.ts`, `componentOptions.ts`: コンポーネントのインターフェースとオプション解決。
- `index.ts`: コアのエントリポイント。必要な API を公開する。

## 実装境界（何をしないか）

- DOM の直接操作（`document.createElement` 等）は行わない。
- ブラウザ固有の最適化やイベントシステムはここでは定義せず、プラットフォーム側が担う。

## 他パッケージとの連携

`runtime-core` はレンダラ抽象（ノード作成、属性更新、イベント登録などの一連の操作）を定義します。実際の動作は `runtime-dom` のようなプラットフォーム実装がその抽象を満たすことで動作します。具体的には:

- コア側: レンダラの抽象を期待する（例: `render`, `patch` の呼び出し）
- プラットフォーム側: `nodeOps` 等を提供し、ノードの生成/差し替え/イベント登録を実行する

簡単な流れ（高レベル）:

1. `createApp`（コア側）を呼ぶ
2. コアはレンダラの抽象 API を通じて初期描画処理を進める
3. `runtime-dom` が抽象 API の具象実装を提供しているため、ブラウザ DOM に反映される

## 開発者向けメモ

- プラットフォームを追加したい場合は、コアが要求する最小限のノード操作インターフェースを実装してください。
- コードを読む際はまず `apiCreateApp.ts` → `index.ts` → `component.ts` の順で追うと理解しやすいです。

```

```
